<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Brighter Minds</title>

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <!-- Vue 2 -->
  <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
</head>
<body>
  <div id="app" class="container mt-4">
    <!-- Header -->
    <header class="d-flex justify-content-between align-items-center mb-4">
      <div>
        <h1 class="fw-bold text-primary">{{ sitename }}</h1>
        <p class="text-muted fst-italic">{{ ssitename }}</p>
      </div>
      <button class="btn btn-warning" @click="toggleCart" :disabled="cart.length === 0">
        {{ cart.length }} <i class="fa-solid fa-cart-shopping ms-1"></i> Checkout
      </button>
    </header>

    <!-- LESSONS PAGE -->
    <section v-if="!showCart" class="row justify-content-end">
      <div class="col-lg-10">

        <!-- Filters -->
        <div class="d-flex flex-wrap mb-4 align-items-center">
          <input v-model="searchQuery" @input="searchLessons"
            type="text" placeholder="Search lessons"
            class="form-control me-2 mb-2" style="max-width: 250px;" />

          <select v-model="sortBy" class="form-select me-2 mb-2" style="width: 200px;">
            <option value="subject">Subject</option>
            <option value="location">Location</option>
            <option value="price">Price</option>
            <option value="spaces">Spaces</option>
          </select>

          <button class="btn btn-secondary mb-2" @click="sortOrder *= -1">
            Sort: {{ sortOrder === 1 ? 'Asc' : 'Desc' }}
          </button>
        </div>

        <!-- Lessons list -->
<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
  <div v-for="lesson in sortedLessons" :key="lesson.id" class="col">
    <div class="card h-100 border-info shadow-sm">
      
      <!-- Lesson Image -->
      <img :src="lesson.image" class="card-img-top" alt="Lesson Image" style="height: 200px; object-fit: cover;" />

      <div class="card-body">
        <h5 class="card-title">
          <i :class="['fa-solid', lesson.icon]" class="me-2 text-info"></i>
          {{ lesson.subject }}
        </h5>
        <p class="card-text"><strong>Location:</strong> {{ lesson.location }}</p>
        <p class="card-text"><strong>Price:</strong> Â£{{ lesson.price }}</p>
        <p class="card-text"><strong>Spaces:</strong> {{ lesson.spaces }}</p>
      </div>

      <div class="card-footer bg-white border-top-0">
        <button class="btn btn-primary w-100"
          :disabled="lesson.spaces === 0"
          @click="addToCart(lesson)">
          Add to Cart
        </button>
      </div>
    </div>
  </div>
</div>

      </div>
    </section>

    <!-- CART PAGE -->
    <section v-else class="mt-4">
      <h2 class="mb-3">ðŸ›’ Shopping Cart</h2>

      <div v-if="cart.length > 0" class="list-group mb-4">
        <div v-for="(item, index) in cart" :key="index"
          class="list-group-item d-flex justify-content-between align-items-center">
          {{ item.subject }} - {{ item.location }}
          <button class="btn btn-sm btn-danger" @click="removeFromCart(item)">
            Remove
          </button>
        </div>
      </div>
      <div v-else class="alert alert-info">Your cart is empty.</div>

      <!-- Checkout Form -->
      <form @submit.prevent="checkout" class="bg-light p-4 rounded shadow-sm" style="max-width: 400px;">
        <h4 class="mb-3">Checkout Form</h4>
        <div class="mb-3">
          <label class="form-label">Name</label>
          <input
            v-model="name"
            type="text"
            class="form-control"
            placeholder="Letters only"
            required
            pattern="[A-Za-z\s]+"
            title="Name must contain letters only"
          />
        </div>
        <div class="mb-3">
          <label class="form-label">Phone</label>
          <input
            v-model="phone"
            type="text"
            class="form-control"
            placeholder="Numbers only"
            required
            pattern="\d+"
            title="Phone must contain numbers only"
          />
        </div>
        <button type="submit" class="btn btn-success w-100" :disabled="!validForm">
          Confirm Order
        </button>
      </form>
    </section>
  </div>

  <!-- Vue App -->
  <script>
    new Vue({
      el: '#app',
      data: {
        sitename: "Brighter Minds",
        ssitename: "After School Enrichment for Curious Learners",
        lessons: [
  { id: 1, subject: "Robotics", location: "Kigali", price: 150, spaces: 5, icon: "fa-robot", image: "https://cdn-icons-png.flaticon.com/512/4712/4712032.png" },
  { id: 2, subject: "Game Design", location: "Nairobi", price: 120, spaces: 5, icon: "fa-gamepad", image: "https://cdn-icons-png.flaticon.com/512/2864/2864190.png" },
  { id: 3, subject: "Drama", location: "Accra", price: 90, spaces: 5, icon: "fa-masks-theater", image: "https://cdn-icons-png.flaticon.com/512/3075/3075977.png" },
  { id: 4, subject: "Basketball", location: "Lagos", price: 100, spaces: 5, icon: "fa-basketball", image: "https://cdn-icons-png.flaticon.com/512/682/682055.png" },
  { id: 5, subject: "Dance", location: "Kampala", price: 85, spaces: 5, icon: "fa-music", image: "https://cdn-icons-png.flaticon.com/512/2303/2303984.png" },
  { id: 6, subject: "Creative Writing", location: "Gaborone", price: 70, spaces: 5, icon: "fa-pen-nib", image: "https://cdn-icons-png.flaticon.com/512/3135/3135768.png" },
  { id: 7, subject: "Environment Club", location: "Harare", price: 60, spaces: 5, icon: "fa-leaf", image: "https://cdn-icons-png.flaticon.com/512/824/824811.png" },
  { id: 8, subject: "Chess", location: "Abuja", price: 75, spaces: 5, icon: "fa-chess", image: "https://upload.wikimedia.org/wikipedia/commons/4/4e/Chess_pieces_close_up.jpg" },
  { id: 9, subject: "Photography", location: "Addis Ababa", price: 95, spaces: 5, icon: "fa-camera-retro", image: "https://cdn-icons-png.flaticon.com/512/2922/2922018.png" },
  { id: 10, subject: "Entrepreneurship", location: "Dakar", price: 130, spaces: 5, icon: "fa-briefcase", image: "https://cdn-icons-png.flaticon.com/512/3050/3050525.png" },
  { id: 11, subject: "Public Speaking", location: "Dar es Salaam", price: 100, spaces: 5, icon: "fa-bullhorn", image: "https://cdn-icons-png.flaticon.com/512/535/535188.png" },
  { id: 12, subject: "Gardening", location: "Bamako", price: 50, spaces: 5, icon: "fa-seedling", image: "https://cdn-icons-png.flaticon.com/512/1443/1443794.png" },
  { id: 13, subject: "Cooking", location: "Lusaka", price: 80, spaces: 5, icon: "fa-utensils", image: "https://cdn-icons-png.flaticon.com/512/3515/3515387.png" },
  { id: 14, subject: "Fashion Design", location: "Maputo", price: 110, spaces: 5, icon: "fa-scissors", image: "https://cdn-icons-png.flaticon.com/512/2920/2920187.png" },
  { id: 15, subject: "Animal Care", location: "Monrovia", price: 70, spaces: 5, icon: "fa-paw", image: "https://cdn-icons-png.flaticon.com/512/616/616408.png" },
  { id: 16, subject: "Yoga", location: "Nouakchott", price: 65, spaces: 5, icon: "fa-child", image: "https://spa-accor.imgix.net/https%3A%2F%2Fimages.ctfassets.net%2F6np2whvu93rb%2F470eri3W3T63RVS8jq0HwA%2Fb7ad1a330047c26e94feab8e42473a7a%2FGettyImages-748340101.jpg?ixlib=js-3.8.0&ar=16%3A9&auto=format&crop=edges&dpr=1&fit=crop&w=800&s=cd0a754a40f6ac316ac20b988be88263" },
  { id: 17, subject: "Crafts", location: "Freetown", price: 60, spaces: 5, icon: "fa-tools", image: "https://cdn-icons-png.flaticon.com/512/809/809957.png" },
  { id: 18, subject: "Science Lab", location: "Port Harcourt", price: 140, spaces: 5, icon: "fa-flask", image: "https://cdn-icons-png.flaticon.com/512/2933/2933913.png" },
  { id: 19, subject: "Music Band", location: "Johannesburg", price: 100, spaces: 5, icon: "fa-guitar", image: "https://cdn-icons-png.flaticon.com/512/2255/2255127.png" },
  { id: 20, subject: "First Aid", location: "Kano", price: 95, spaces: 5, icon: "fa-kit-medical", image: "https://cdn-icons-png.flaticon.com/512/484/484167.png" },
  { id: 21, subject: "3D Printing", location: "Zanzibar", price: 145, spaces: 5, icon: "fa-cube", image: "https://cdn-icons-png.flaticon.com/512/3852/3852650.png" },
  { id: 22, subject: "Mobile App Design", location: "Windhoek", price: 135, spaces: 5, icon: "fa-mobile-screen-button", image: "https://cdn-icons-png.flaticon.com/512/888/888879.png" },
  { id: 23, subject: "Football", location: "Juba", price: 90, spaces: 5, icon: "fa-futbol", image: "https://cdn-icons-png.flaticon.com/512/861/861512.png" },
  { id: 24, subject: "Painting", location: "Ouagadougou", price: 70, spaces: 5, icon: "fa-paintbrush", image: "https://cdn-icons-png.flaticon.com/512/2232/2232688.png" },
  { id: 25, subject: "Sculpting", location: "Bujumbura", price: 75, spaces: 5, icon: "fa-drafting-compass", image: "https://cdn-icons-png.flaticon.com/512/3616/3616755.png" }
],
 
        cart: [],
        showCart: false,
        name: '',
        phone: '',
        sortBy: 'subject',
        sortOrder: 1,
        searchQuery: ''
      },
      computed: {
        sortedLessons() {
          let filtered = this.lessons.filter(lesson => {
            const term = this.searchQuery.toLowerCase();
            return (
              lesson.subject.toLowerCase().includes(term) ||
              lesson.location.toLowerCase().includes(term) ||
              lesson.price.toString().includes(term) ||
              lesson.spaces.toString().includes(term)
            );
          });

          return filtered.sort((a, b) => {
            let x = a[this.sortBy];
            let y = b[this.sortBy];

            if (typeof x === 'string') {
              x = x.toLowerCase();
              y = y.toLowerCase();
            }

            return (x > y ? 1 : x < y ? -1 : 0) * this.sortOrder;
          });
        },
        validForm() {
          const nameValid = /^[A-Za-z\s]+$/.test(this.name);
          const phoneValid = /^\d+$/.test(this.phone);
          return nameValid && phoneValid && this.cart.length > 0;
        }
      },
      methods: {
        toggleCart() {
          this.showCart = !this.showCart;
        },
        addToCart(lesson) {
          if (lesson.spaces > 0) {
            this.cart.push(lesson);
            lesson.spaces--;
          }
        },
        removeFromCart(lesson) {
          const index = this.cart.indexOf(lesson);
          if (index !== -1) {
            this.cart.splice(index, 1);
            lesson.spaces++;
          }
        },
        checkout() {
          alert(`Order confirmed for ${this.name}. Thank you!`);
          this.cart = [];
          this.name = '';
          this.phone = '';
          this.showCart = false;
        },
        searchLessons() {
          // Reactive via computed
        }
      }
    });
  </script>

  <!-- Bootstrap 5 JS (optional, for dropdowns, etc.) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
